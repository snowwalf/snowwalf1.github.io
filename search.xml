<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[å¥æŸ„æ³„éœ²å›´æ•è®°]]></title>
      <url>%2F2017%2F02%2F18%2F%E5%8F%A5%E6%9F%84%E6%B3%84%E9%9C%B2%E5%9B%B4%E6%8D%95%E8%AE%B0%2F</url>
      <content type="text"><![CDATA[è®°å½•å®žé™…çš„ç”Ÿäº§çŽ¯å¢ƒä¸­é‡åˆ°çš„BUGåŠè§£å†³é—®é¢˜çš„ä¸€äº›ç»éªŒ é—®é¢˜å‘çŽ°åšä¸»è´Ÿè´£çš„ä¸€ä¸ªåœ¨çº¿å›¾ç‰‡å¤„ç†æœåŠ¡ï¼Œå­˜åœ¨é•¿æ—¶é—´ï¼ˆè¶…è¿‡20å¤©ï¼‰è¿è¡ŒåŽä¼šæœåŠ¡è¿›ç¨‹å‡ºé”™é€€å‡ºçš„é—®é¢˜ã€‚è¿ç»´å°ä¼™ä¼´æŠŠæƒ…å†µæŠ¥åˆ°å¼€å‘è¿™ï¼Œå¹¶æ²¡æœ‰æ›´å¤šçš„ä¿¡æ¯ðŸ˜µðŸ˜µðŸ˜µ åˆæ­¥åˆ†æžäº§å“æœåŠ¡è¯¥äº§å“æ˜¯ä¸€ä¸ªäº‘è®¡ç®—å›¾ç‰‡å¤„ç†æœåŠ¡ï¼ˆå‚è§ä¸ƒç‰›æ•°æ®å¤„ç†æœåŠ¡ï¼‰ï¼ŒåŽå°ä½¿ç”¨åˆ°äº†imageMagick SDKçš„åŸºæœ¬å›¾ç‰‡å¤„ç†åŠŸèƒ½ã€‚ æœåŠ¡åŒæ—¶éƒ¨ç½²åœ¨ç‰©ç†æœåŠ¡å™¨å’Œå®¹å™¨ä¸­ï¼Œå¤šä¸ªå¼‚åœ°åŒºåŸŸæœºæˆ¿ï¼Œä½†å®žé™…ä»…åœ¨å…¶ä¸­ä¸€ä¸ªæœºæˆ¿çš„ç‰©ç†é›†ç¾¤ä¸­å‘ç”Ÿè¿›ç¨‹é‡å¯çš„æƒ…å†µï¼ˆæœåŠ¡ä½¿ç”¨supervisorctlæ‰˜ç®¡ï¼Œå¼‚å¸¸é€€å‡ºåŽè‡ªåŠ¨é‡å¯ï¼‰ã€‚ çº¿ä¸ŠæœåŠ¡å¹¶æœªå¼€å¯coredumpï¼›å‡ºcoreæ—¥å¿—è°ƒç”¨æ ˆä»…æ˜¾ç¤ºæ•èŽ·signal 11ï¼Œå›žæ”¾ä¸Šä¸€æ¡çš„æœåŠ¡è¯·æ±‚å¹¶ä¸èƒ½è§¦å‘é”™è¯¯ã€‚ æŸ¥çœ‹è¯¥æœåŠ¡åœ¨æ­¤DCä¸­ç›‘æŽ§æƒ…å†µï¼Œå‘çŽ°å³°å€¼TPSåœ¨40K+ï¼Œæ—¥å‡TPSçº¦åœ¨20Kå·¦å³ï¼ŒCPUã€å†…å­˜ã€ç£ç›˜å’Œç½‘ç»œå¸¦å®½å‡åœ¨è­¦æˆ’å€¼ä»¥ä¸‹ï¼ŒæœåŠ¡å™¨å¥æŸ„æ•°ä¿æŒåœ¨æœ€é«˜ç»´æŒåœ¨10Kå·¦å³ã€‚ è¯Šæ–­æ ¹æ®ç»éªŒï¼Œé•¿æ—¶é—´è¿è¡ŒåŽæœåŠ¡è¿›ç¨‹å‡ºé”™é€€å‡ºï¼Œå¾€å¾€æ˜¯å› ä¸ºå­˜åœ¨èµ„æºæ³„éœ²ï¼Œä¾‹å¦‚å†…å­˜æ³„éœ²ã€å¥æŸ„æ³„éœ²ã€ä¸´æ—¶æ–‡ä»¶æœªåˆ é™¤ç­‰ã€‚ è°ƒå–æœåŠ¡è¿›ç¨‹çš„ç‰©ç†èµ„æºä½¿ç”¨æƒ…å†µè¿›è¡Œåˆ†æžï¼ŒCPUã€å†…å­˜å‡æ— æ˜¾è‘—å¼‚å¸¸ï¼Œä½†æ–‡ä»¶å¥æŸ„ä½¿ç”¨æƒ…å†µå­˜åœ¨é—®é¢˜ ä»Žä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼ŒæœåŠ¡å¥æŸ„æ•°åŸºæœ¬å‘ˆçº¿æ€§å¢žé•¿ï¼Œé™¡é™çš„åœ°æ–¹ä¸ºæœåŠ¡è¿›ç¨‹è¢«é‡å¯äº†ï¼ˆæ¯”å¦‚æœåŠ¡æ›´æ–°å‘å¸ƒï¼‰ï¼Œè¿™å¯¹äºŽä¸€ä¸ªé•¿æœŸè¿è¡Œçš„æœåŠ¡ç«¯ç¨‹åºæ˜¯ä¸åˆç†çš„ã€‚ æ•…èƒ½åˆæ­¥åˆ¤æ–­å‡ºï¼Œç¨‹åºå­˜åœ¨æ–‡ä»¶å¥æŸ„æ³„éœ²ã€‚ æ·±å…¥åˆ†æžçº¿ä¸Šåˆ†æžè¯¥æœåŠ¡éƒ¨ç½²åœ¨å¤šä¸ªDCï¼ŒæœåŠ¡å‘ç”Ÿè¿›ç¨‹é‡å¯å‡é›†ä¸­åœ¨ä¸€ä¸ªDCã€‚è¯¥DCæœåŠ¡è¯·æ±‚æœ€é«˜ï¼Œå³°å€¼TPSå¯ä»¥è¾¾åˆ°30+Kï¼›ç›¸å¯¹å…¶ä»–DCçš„è¯·æ±‚é‡è¦å°ä¸€ä¸ªæ•°é‡çº§ã€‚ ç™»å½•æœåŠ¡éƒ¨ç½²åœ¨DCçš„ä¸€å°æœåŠ¡å™¨ï¼Œä½¿ç”¨lsofæŸ¥è¯¢æœåŠ¡è¿›è¡ŒFDä½¿ç”¨æƒ…å†µï¼Œå¯ä»¥å‘çŽ°å­˜åœ¨å¤§é‡çš„FDå¤„äºŽdeletedçŠ¶æ€ï¼ˆæ ‡è®°åˆ é™¤ä½†ä»æœªé‡Šæ”¾ï¼‰ã€‚ 123456789101112lsof -p 9291 | grep deleted...qboximage 9291 qboxserver 1228r REG 8,1 31346 4487983 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d98ac907d245_452020_1d0 (deleted)qboximage 9291 qboxserver 1229r REG 8,1 18542 4487917 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d9871a4080c3_44d568_364 (deleted)qboximage 9291 qboxserver 1230r REG 8,1 37602 4488004 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d9858c894d31_44b62d_25f (deleted)qboximage 9291 qboxserver 1231r REG 8,1 50062 4487872 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d97fe5e79906_44401e_26d (deleted)qboximage 9291 qboxserver 1232r REG 8,1 12640 4487898 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d9894b49bfcc_45018b_2d9 (deleted)qboximage 9291 qboxserver 1233r REG 8,1 49844 4488020 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d989f6040b2d_450f17_2bf (deleted)qboximage 9291 qboxserver 1239r REG 8,1 10772 4487929 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d980dc71106c_4454e1_1ef (deleted)qboximage 9291 qboxserver 1240r REG 8,1 73538 4487977 /home/qboxserver/image6/_package/run/fopd_tmpdir/mogr2_244b_34d989d52655ea_450c7e_1b5 (deleted)... è¿›ç¨‹é‡å¯åŽï¼Œå•æ—¥å¯å †ç§¯æœªé‡Šæ”¾çš„FDåˆ°500ä¸ªå·¦å³ æ—¥å¿—åˆ†æžç”¨lsofæŸ¥çœ‹æœªé‡Šæ”¾çš„FDï¼Œå‘çŽ°éƒ½æ˜¯æŒ‡å‘æœåŠ¡æµç¨‹ä¸­çš„ä¸´æ—¶æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ä¸­åŒ…å«å”¯ä¸€HASHå­—ç¬¦ä¸²ã€‚ åœ¨æ—¥å¿—ç³»ç»Ÿä¸­æ£€ç´¢ä¸Šè¿°hashå€¼ï¼Œå‘çŽ°éƒ½æ˜¯åŒä¸€ç§è¯·æ±‚ç±»åž‹ï¼Œå³webpå›¾ç‰‡è½¬æˆwebpè¯·æ±‚ï¼ŒçŒœæµ‹å¯èƒ½ä¸Žwebpå¤„ç†ä¾‹ç¨‹æœ‰å…³ã€‚ éšæœºæŠ“å–å‡ ä¸ªè¯·æ±‚ï¼Œä»»é€‰ä¸€å°æœåŠ¡å™¨ï¼Œè¿›è¡Œè¯·æ±‚å›žè®¿ï¼Œç»“åˆæ—¥å¿—ç³»ç»Ÿä½¿ç”¨lsofæ£€ç´¢ï¼Œå‘çŽ°ç¡®å®žæ¯ä¸€ä¸ªwebpè½¬webpçš„è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªFDæ³„éœ²ã€‚æž„é€ ç±»ä¼¼çš„è¯·æ±‚ï¼Œå‘é€çº¿ä¸Šå…¶ä»–DCè¿›è¡Œå¤„ç†ï¼Œé€šè¿‡åŽå°æ—¥å¿—+lsofï¼Œå‘çŽ°åŒæ ·ä¹Ÿå‘ç”Ÿäº†FDæ³„éœ²ã€‚ æŠ“å–çº¿ä¸Šæ–‡ä»¶ï¼Œå°†çº¿ä¸ŠæœåŠ¡è¯·æ±‚åœ¨æœ¬åœ°å¼€å‘çŽ¯å¢ƒè¿›è¡Œå›žæ”¾ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥äº§ç”Ÿå¥æŸ„æ³„éœ²ã€‚ è‡³æ­¤ï¼ŒBUGå¯ä»¥ç¨³å®šå¤çŽ°ï¼Œå¯ä»¥ç¡®å®šé’ˆå¯¹webpè½¬webpçš„è¯·æ±‚å­˜åœ¨å¥æŸ„æ³„éœ²ã€‚ è°ƒè¯•åˆ†æžæ³„éœ²å®šä½é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ³„éœ²å‘ç”Ÿåœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿè¯¥æœåŠ¡ç«¯http serverä½¿ç”¨goè¯­è¨€ï¼Œå›¾ç‰‡å¤„ç†ä½¿ç”¨cgoè°ƒç”¨å¼€æºåº“imageMagickçš„SDKï¼ŒæœåŠ¡ä»£ç å°±æœ‰ä¸Šåƒè¡Œï¼Œå¼€æºåº“éƒ¨åˆ†åšä¸»è¿˜ä¸å¤Ÿç†Ÿæ‚‰ðŸ˜³ðŸ˜³ðŸ˜³ å¾ˆæ˜¾ç„¶ï¼Œç”Ÿå•ƒä»£ç åŽ»æ‰¾BUGç»å¯¹ä¸æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œéœ€è¦å¦æƒ³åŠžæ³•ã€‚ ç®€å•æµè§ˆimageMagickçš„ä»£ç ï¼Œå¯ä»¥å‘çŽ°å¤§éƒ¨åˆ†éƒ½æ˜¯Cè¯­è¨€å†™çš„ï¼ˆMagick++éƒ¨åˆ†è¿›è¡Œäº†é¢å‘å¯¹è±¡çš„å°è£…ï¼Œä½¿ç”¨äº†C++ï¼‰ã€‚æ„Ÿè°¢ç”·ç¥žè°­æµ©å¼ºï¼Œåšä¸»è¿˜è®°å¾—ï¼ŒCè¯­è¨€ä¸­æ¶‰åŠæ–‡ä»¶å¥æŸ„çš„å‡½æ•°ä¸»è¦æœ‰openã€closeã€fopenå’Œfcloseï¼Œä¹Ÿæ˜¯æƒ³åˆ°äº†å¯ä»¥é€šè¿‡Hackåº•å±‚libcçš„åº“å‡½æ•°ã€‚ åºŸè¯ä¸å¤šè¯´ï¼Œä¸Šä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;dlfcn.h&gt;#include &lt;execinfo.h&gt;typedef int(*OPEN) (const char * pathname, int flags);typedef int(*CLOSE) (int fildes);typedef FILE*(*FOPEN) (const char * path, const char * mode);typedef int(*FCLOSE)(FILE* stream);/* æ‰“å°è°ƒç”¨æ ˆçš„æœ€å¤§æ·±åº¦ */#define DUMP_STACK_DEPTH_MAX 16void dump_trace() &#123; void *stack_trace[DUMP_STACK_DEPTH_MAX] = &#123;0&#125;; char **stack_strings = NULL; int stack_depth = 0; int i = 0; /* èŽ·å–æ ˆä¸­å„å±‚è°ƒç”¨å‡½æ•°åœ°å€ */ stack_depth = backtrace(stack_trace, DUMP_STACK_DEPTH_MAX); /* æŸ¥æ‰¾ç¬¦å·è¡¨å°†å‡½æ•°è°ƒç”¨åœ°å€è½¬æ¢ä¸ºå‡½æ•°åç§° */ stack_strings = (char **)backtrace_symbols(stack_trace, stack_depth); if (NULL == stack_strings) &#123; printf(&quot; Memory is not enough while dump Stack Trace! \r\n&quot;); return; &#125; /* æ‰“å°è°ƒç”¨æ ˆ */ printf(&quot; Stack Trace: \r\n&quot;); for (i = 0; i &lt; stack_depth; ++i) &#123; printf(&quot; [%d] %s \r\n&quot;, i, stack_strings[i]); &#125; /* èŽ·å–å‡½æ•°åç§°æ—¶ç”³è¯·çš„å†…å­˜éœ€è¦è‡ªè¡Œé‡Šæ”¾ */ free(stack_strings); stack_strings = NULL; return;&#125;int open(const char * pathname, int flags)&#123; static void *handle = NULL; static OPEN old_open = NULL; if( !handle ) &#123; handle = dlopen(&quot;libc.so.6&quot;, RTLD_LAZY); old_open = (OPEN)dlsym(handle, &quot;open&quot;); &#125; int fd = old_open(pathname, flags); printf(&quot;open function invoked. path=[%s] flag=&lt;%d&gt; fd=[%d]\n&quot;, pathname, flags, fd); dump_trace(); return fd;&#125;int close(int fildes)&#123; static void *handle = NULL; static CLOSE old_close = NULL; if( !handle ) &#123; handle = dlopen(&quot;libc.so.6&quot;, RTLD_LAZY); old_close = (CLOSE)dlsym(handle, &quot;open&quot;); &#125; printf(&quot;close function invoked. fd=[%d] flag=&lt;%d&gt;\n&quot;, fildes); dump_trace(); return old_close(fildes);&#125;FILE* fopen(const char * path, const char * mode)&#123; static void *handle = NULL; static FOPEN old_fopen = NULL; if( !handle ) &#123; handle = dlopen(&quot;libc.so.6&quot;, RTLD_LAZY); old_fopen = (FOPEN)dlsym(handle, &quot;fopen&quot;); &#125; FILE* f = old_fopen(path,mode); printf(&quot;fopen function invoked. path=[%s] flag=&lt;%s&gt; FILE=[%p]\n&quot;, path, mode,f); dump_trace(); return f;&#125;int fclose(FILE* stream)&#123; static void *handle = NULL; static FCLOSE old_fclose = NULL; if( !handle ) &#123; handle = dlopen(&quot;libc.so.6&quot;, RTLD_LAZY); old_fclose = (FCLOSE)dlsym(handle, &quot;fclose&quot;); &#125; printf(&quot;fclose function invoked. FILE=[%p]\n&quot;, stream); dump_trace(); return old_fclose(stream);&#125; ä¸Šè¿°ä»£ç å‹¾äº†libcä¸­çš„openã€closeã€fopenå’Œfcloseå‡½æ•°ï¼Œæ‰“å°å‡ºäº†è°ƒç”¨å‚æ•°ï¼Œä»¥åŠå‡½æ•°è°ƒç”¨å †æ ˆ ç¼–è¯‘æˆåŠ¨æ€é“¾æŽ¥åº“1gcc -fPIC -shared -o hook.so hook.c -ldl æ‰‹åŠ¨æŒ‚è½½åŠ¨æ€é“¾æŽ¥åº“ï¼Œæœ¬åœ°å¯åŠ¨æœåŠ¡ç¨‹åº1LD_LIBRARY_PATH=./hook.so ./qboximage -f ./qboximage.conf é‡æ–°å‘é€ä¹‹å‰çš„è¯·æ±‚ï¼Œå¯ä»¥ä»Žæ—¥å¿—ä¸­èŽ·å–å¯¹åº”FDçš„æƒ…å†µå¦‚ä¸‹ï¼šç¬¬ä¸€æ¬¡å¥æŸ„æ‰“å¼€(fopen)12345678910111213141516171819202122fopen function invoked. path=[/workspace/tmp/mogr2_7_34d6663757bf64_1_31a] flag=&lt;rb&gt; FILE=[0x7fe4b403a5b0] Stack Trace: [0] /root/hook.so(dump_trace+0x52) [0x7fe4c8e609a7] [1] /root/hook.so(fopen+0x96) [0x7fe4c8e60c07] [2] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(OpenBlob+0x6eb) [0x7fe4c85112eb] [3] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(SetImageInfo+0x262) [0x7fe4c85d8332] [4] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImage+0xa1) [0x7fe4c85454a1] [5] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImages+0x15b) [0x7fe4c85465db] [6] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(ConvertImageCommand+0x993) [0x7fe4c8b83d53] [7] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(MagickCommandGenesis+0x6b3) [0x7fe4c8bf0b63] [8] /root/dora-image(_cgo_f771dc2ebe72_Cfunc_myConvert+0x4b) [0x86cd5b] [9] /root/dora-image() [0x475770] å¯¹åº”çš„å¥æŸ„å…³é—­ï¼š12345678910111213141516171819202122fclose function invoked. FILE=[0x7fe4b403a5b0] Stack Trace: [0] /root/hook.so(dump_trace+0x52) [0x7fe4c8e609a7] [1] /root/hook.so(fclose+0x6f) [0x7fe4c8e60c7c] [2] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(CloseBlob+0x241) [0x7fe4c8510b21] [3] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(SetImageInfo+0x343) [0x7fe4c85d8413] [4] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImage+0xa1) [0x7fe4c85454a1] [5] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImages+0x15b) [0x7fe4c85465db] [6] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(ConvertImageCommand+0x993) [0x7fe4c8b83d53] [7] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(MagickCommandGenesis+0x6b3) [0x7fe4c8bf0b63] [8] /root/dora-image(_cgo_f771dc2ebe72_Cfunc_myConvert+0x4b) [0x86cd5b] [9] /root/dora-image() [0x475770] ç¬¬äºŒæ¬¡å¥æŸ„æ‰“å¼€ï¼š12345678910111213141516171819202122fopen function invoked. path=[/workspace/tmp/mogr2_7_34d6663757bf64_1_31a] flag=&lt;rb&gt; FILE=[0x7fe4b403de50] Stack Trace: [0] /root/hook.so(dump_trace+0x52) [0x7fe4c8e609a7] [1] /root/hook.so(fopen+0x96) [0x7fe4c8e60c07] [2] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(OpenBlob+0x6eb) [0x7fe4c85112eb] [3] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(+0x30aada) [0x7fe4c8791ada] [4] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImage+0x198) [0x7fe4c8545598] [5] /root/fop_depend/_package/lib_for_fopd/libMagickCore-6.Q16.so.2(ReadImages+0x15b) [0x7fe4c85465db] [6] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(ConvertImageCommand+0x993) [0x7fe4c8b83d53] [7] /root/fop_depend/_package/lib_for_fopd/libMagickWand-6.Q16.so.2(MagickCommandGenesis+0x6b3) [0x7fe4c8bf0b63] [8] /root/dora-image(_cgo_f771dc2ebe72_Cfunc_myConvert+0x4b) [0x86cd5b] [9] /root/dora-image() [0x475770] ç„¶åŽå°±ä¹ˆæœ‰å…³é—­äº†ã€‚ã€‚ã€‚å¥½å§ï¼Œè‡³æ­¤ç¡®å®šäº†FDåœ¨è¿™é‡Œè½è·‘äº† ä»£ç åˆ†æžé‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œæ ¹æ®è°ƒç”¨å †æ ˆï¼Œå¯ä»¥çœ‹åˆ°ç¬¬äºŒæ¬¡è°ƒç”¨fopençš„æ˜¯OpenBlobå‡½æ•°ã€‚grepäº†ä¸€æŠŠimageMagickçš„ä»£ç ï¼Œå‘çŽ°æœ‰å¥½å‡ åå¤„ã€‚ã€‚ã€‚åšä¸»æœ€æ¨è¿™ç§å¤§æµ·æžé’ˆçš„çœ‹ä»£ç ðŸ˜ ï¼Œä¸€å®šè¦å†æƒ³æƒ³åŠžæ³• æ—¢ç„¶æœ‰äº†è°ƒç”¨å †æ ˆï¼Œä¹Ÿå°±æœ‰äº†å‡½æ•°èµ·å§‹åœ°å€å’Œè°ƒç”¨åç§»åœ°å€ï¼Œä¸ºå•¥ä¸åæ±‡ç¼–ä¸‹ä»£ç ï¼Œå‡è½»çœ‹ä»£ç çš„å·¥ä½œé‡å‘¢ï¼Ÿ é¦–å…ˆï¼Œçœ‹è°ƒç”¨å †æ ˆï¼Œå‘çŽ°æ‰€æœ‰imageMagickè°ƒç”¨éƒ½åœ¨åŠ¨æ€é“¾æŽ¥åº“libMagickCore-6.Q16.so.2ä¸­ã€‚éœ€è¦downä¸€ä»½çº¿ä¸ŠåŒç‰ˆæœ¬çš„imageMagickä»£ç ï¼ˆv6.9.2ï¼Œå®žæµ‹æœ€æ–°ä»£ç ä¹Ÿè¦åŒæ ·é—®é¢˜ï¼‰ï¼Œæ‰“å¼€-gç¼–è¯‘é€‰é¡¹ï¼Œæ›¿æ¢æŽ‰å¼€å‘çŽ¯å¢ƒåŽŸæœ‰çš„libMagickCore-6.Q16.so.2åº“ï¼Œé‡å¤ä¹‹å‰çš„è°ƒè¯•æ­¥éª¤ï¼ŒèŽ·å¾—æ–°çš„è°ƒç”¨å †æ ˆã€‚åšä¸»æœ¬åœ°å¸¸å¹´ç”¨çš„è°ƒè¯•ç‰ˆsoï¼Œæ•…çœç•¥è¯¥æ­¥ã€‚ã€‚ã€‚ ç„¶åŽï¼Œä½¿ç”¨objdumpåæ±‡ç¼–è¯¥åŠ¨æ€é“¾æŽ¥åº“ï¼Œæ¯”è¾ƒå¤§ï¼Œéœ€è¦è€å¿ƒç­‰å¾…1objdump -l -DS ./libMagickCore-6.Q16.so.2 &gt; image.dump æŸ¥æ‰¾ç¬¬äºŒæ¬¡OpenBlobçš„è°ƒç”¨åœ°å€ï¼Œ.textæ®µï¼Œåç§»åœ°å€+0x30aada123456789/root/ImageMagick-6.9.1-2/coders/webp.c:250 30aada: 85 c0 test %eax,%eax 30aadc: 0f 84 92 00 00 00 je 30ab74 &lt;ReadWEBPImage+0x124&gt;WebPInitDecoderConfig():/usr/local/include/webp/decode.h:466 30aae2: 4c 8d 6c 24 40 lea 0x40(%rsp),%r13 30aae7: be 03 02 00 00 mov $0x203,%esi 30aaec: 4c 89 ef mov %r13,%rdi 30aaef: e8 0c 1a d6 ff callq 6c500 &lt;WebPInitDecoderConfigInternal@plt&gt; æŠ“åˆ°äº†ï¼Œé—®é¢˜å‡ºåœ¨coders/webp.cï¼Œç¬¬250è¡Œã€‚ã€‚ã€‚ BUGè§£å†³å®šä½åˆ°äº†å‡ºé”™ä»£ç ä½ç½®å°±å¥½åŠžäº†ã€‚ç»è¿‡å¯¹ä»£ç çš„åˆ†æžï¼Œä¸éš¾çœ‹å‡ºï¼ŒimageMagickåœ¨webpçš„è§£åŒ…å™¨ä¸­ä½¿ç”¨OpenBlobæ‰“å¼€äº†æºæ–‡ä»¶ï¼Œè¿”å›žå‰å¿˜è®°å…³é—­äº†ã€‚ã€‚ã€‚ psï¼šåšä¸»å‘æ–‡å‰ï¼Œæäº¤çš„fix prå·²è¢«masterä»£ç åˆå¹¶ï¼Œæ•…ä¸Šè¿°é—®é¢˜å®˜æ–¹æœ€æ–°ä»£ç å·²ä¿®å¤]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ImageMagickå·¥å…·ä¹‹Identifyåˆ†æž]]></title>
      <url>%2F2017%2F01%2F25%2FImageMagick%E5%B7%A5%E5%85%B7%E4%B9%8BIdentify%E5%88%86%E6%9E%90%2F</url>
      <content type="text"><![CDATA[æ‘˜è¦ï¼šåˆ†æžImageMagickå·¥å…·ä¸­identifyçš„ä½¿ç”¨ä»¥åŠç»“æžœå†…å®¹è¯´æ˜Ž åŸºæœ¬ä½¿ç”¨12$ identify example.png-&gt; example.png PNG 750x404 750x404+0+0 8-bit sRGB 103KB 0.000u 0:00.000 è¾“å‡ºåˆ†æž é¡¹ç›®åç§° è¯´æ˜Ž ç¤ºä¾‹é¡¹ æ–‡ä»¶å å›¾ç‰‡æ–‡ä»¶çš„æ–‡ä»¶å example.png å›¾ç‰‡æ ¼å¼ å›¾ç‰‡ç¼–ç æ ¼å¼ PNG åƒç´ å¤§å° æè¿°å›¾ç‰‡å¤§å°ï¼Œå•ä½ä¸ºåƒç´  750x404 å‡ ä½•å±žæ€§ï¼ˆGeometryï¼‰ æè¿°äº†å›¾ç‰‡çš„å¤§å°å’Œç›¸å¯¹ä½ç½®ï¼Œæ ¼å¼x{+-}{+-} 750x404+0+0]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å½©è‰²æ¨¡åž‹]]></title>
      <url>%2F2017%2F01%2F22%2F%E5%BD%A9%E8%89%B2%E6%A8%A1%E5%9E%8B%2F</url>
      <content type="text"><![CDATA[æ‘˜è¦ï¼š ä»‹ç»å›¾ç‰‡å½©è‰²æ¨¡åž‹çš„åŸºæœ¬çŸ¥è¯† æ¦‚å¿µç®€ä»‹å½©è‰²æ¨¡åž‹å®šä¹‰è‰²å½©æ¨¡åž‹æ˜¯æè¿°ä½¿ç”¨ä¸€ç»„å€¼ï¼ˆé€šå¸¸ä½¿ç”¨ä¸‰ä¸ªã€å››ä¸ªå€¼æˆ–è€…é¢œè‰²æˆåˆ†ï¼‰è¡¨ç¤ºé¢œè‰²æ–¹æ³•çš„æŠ½è±¡æ•°å­¦æ¨¡åž‹ã€‚ä½†æ˜¯ä¸€ä¸ªä¸Žç»å¯¹è‰²å½©ç©ºé—´æ²¡æœ‰å‡½æ•°æ˜ å°„å…³ç³»çš„è‰²å½©æ¨¡åž‹æˆ–å¤šæˆ–å°‘åœ°éƒ½æ˜¯ä¸Žç‰¹å®šåº”ç”¨è¦æ±‚å‡ ä¹Žæ²¡æœ‰å…³ç³»çš„ä»»æ„è‰²å½©ç³»ç»Ÿã€‚ @Wikizh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%96%93 å¸¸è§å½©è‰²æ¨¡åž‹ åç§° æè¿° åº”ç”¨åœºæ™¯ RGB æœ€é€šç”¨çš„é¢å‘ç¡¬ä»¶çš„æ¨¡åž‹ å½©è‰²æ˜¾ç¤ºå™¨ï¼Œå½©è‰²è§†é¢‘æ‘„åƒæœº CYM é¢å‘å°åˆ· å°åˆ·ï¼Œå½©è‰²æ‰“å°æœº HSI é¢å‘äººçœ¼ YUV å½©è‰²æ·±åº¦å®šä¹‰è‰²å½©æ·±åº¦è®¡ç®—æœºå›¾å½¢å­¦é¢†åŸŸè¡¨ç¤ºåœ¨ä½å›¾æˆ–è€…è§†é¢‘å¸§ç¼“å†²åŒºä¸­å‚¨å­˜1åƒç´ çš„é¢œè‰²æ‰€ç”¨çš„ä½æ•°ï¼Œå®ƒä¹Ÿç§°ä¸ºä½/åƒç´ ï¼ˆbppï¼‰ã€‚è‰²å½©æ·±åº¦è¶Šé«˜ï¼Œå¯ç”¨çš„é¢œè‰²å°±è¶Šå¤šã€‚ @Wikizh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9%E6%B7%B1%E5%BA%A6 å¸¸è§å½©è‰²æ·±åº¦å½©è‰²æ·±åº¦æ˜¯ç”¨â€œnä½é¢œè‰²â€ï¼ˆn-bit colourï¼‰æ¥è¯´æ˜Žçš„ã€‚è‹¥æ·±åº¦æ˜¯nä½ï¼Œå³æœ‰2^nç§é¢œè‰²é€‰æ‹©ï¼Œè€Œå‚¨å­˜æ¯åƒç´ æ‰€ç”¨çš„ä½æ•°å°±æ˜¯næ¯”ç‰¹ã€‚ ä½æ•° é¢œè‰²ç§æ•° è¯´æ˜Ž 1 2 å•è‰²å…‰ï¼Œé»‘ç™½äºŒè‰²ï¼Œç”¨äºŽcompact Macintoshesã€‚ 2 4 CGAï¼Œç”¨äºŽgray-scaleæ—©æœŸçš„NeXTstationåŠcolor Macintoshesã€‚ 3 8 ç”¨äºŽå¤§éƒ¨åˆ†æ—©æœŸçš„ç”µè„‘æ˜¾ç¤ºå™¨ã€‚ 4 16 ç”¨äºŽEGAåŠä¸å¸¸è§åŠåœ¨æ›´é«˜çš„åˆ†è¾¨çŽ‡çš„VGAæ ‡å‡†ï¼Œcolor Macintoshes 5 32 ç”¨äºŽOriginal Amiga chipsetã€‚ 6 64 ç”¨äºŽOriginal Amiga chipsetã€‚ 7 128 8 256 ç”¨äºŽæœ€æ—©æœŸçš„å½©è‰²Unixå·¥ä½œç«™ï¼Œä½Žåˆ†è¾¨çŽ‡çš„VGAï¼ŒSuper VGAï¼ŒAGAï¼Œcolor Macintoshesã€‚ 9 512 10 1024 11 ç”¨äºŽéƒ¨åˆ†ç¡…è°·å›¾å½¢ç³»ç»Ÿï¼ŒNeo Geoï¼Œå½©è‰²NeXTstationåŠAmigaç³»ç»ŸäºŽHAM modeã€‚ 12 ç”¨äºŽéƒ¨åˆ†color Macintoshesã€‚ 24 16777216 çœŸå½©è‰²ï¼Œèƒ½æä¾›æ¯”è‚‰çœ¼èƒ½è¯†åˆ«æ›´å¤šçš„é¢œè‰²ï¼Œç”¨äºŽæ‹æ‘„ç…§ç‰‡ã€‚ RGBå½©è‰²æ¨¡åž‹RGBæ¨¡åž‹èµ·æºäºŽé‡‡ç”¨é˜´æžå°„çº¿ç®¡çš„å½©è‰²ç”µè§†ï¼Œæ¯ç§é¢œè‰²å‡ºçŽ°åœ¨çº¢ã€ç»¿ã€è“çš„åŽŸè‰²å…‰è°±åˆ†é‡é‡ã€‚ å½©è‰²ç©ºé—´åæ ‡ç³»æ¨¡åž‹åŸºäºŽç¬›å¡å°”åæ ‡ç³»ï¼Œxyzè½´åˆ†åˆ«ä»£è¡¨RGBï¼Œå½©è‰²å­ç©ºé—´å¦‚ä¸‹å›¾æ‰€ç¤º è¯¥æ¨¡åž‹ä¸ºåŠ è‰²æ¨¡åž‹ï¼Œåæ ‡åŽŸç‚¹è¡¨ç¤ºé»‘è‰²ï¼Œï¼ˆ1ï¼Œ1ï¼Œ1ï¼‰è¡¨ç¤ºç™½è‰²ï¼ŒR/G/Bå€¼å–å€¼èŒƒå›´åœ¨[0,1] 24æ¯”ç‰¹å½©è‰²æ·±åº¦åœ¨RGBç©ºé—´ä¸­ï¼Œç”¨äºŽè¡¨ç¤ºæ¯ä¸ªåƒç´ çš„æ¯”ç‰¹æ•°ç§°ä¸º åƒç´ æ·±åº¦ã€‚ RGBå½©è‰²æ¨¡åž‹ä¸­çš„å›¾åƒæœ‰3ä¸ªåˆ†é‡å›¾åƒç»„æˆï¼Œæ¯ç§åŽŸè‰²ä¸€å¹…åˆ†é‡å›¾åƒã€‚åœ¨RGBæ˜¾ç¤ºå™¨ä¸­ï¼Œè¿™3å¹…å›¾åƒåœ¨å±å¹•ä¸­æœ€ç»ˆæ··åˆæˆä¸€å¹…å½©è‰²å›¾åƒã€‚é€šå¸¸ï¼Œåˆ†é‡å›¾åƒå¯ä»¥è¡¨ç¤ºä¸ºä¸€å¹…8æ¯”ç‰¹å›¾åƒï¼Œå³RGBå½©è‰²åƒç´ å¯ä»¥è¡¨ç¤ºä¸º24æ¯”ç‰¹æ·±åº¦ã€‚ é€šå¸¸ å…¨å½©å›¾åƒ å³æŒ‡ä¸€å¹…24æ¯”ç‰¹çš„RGBå½©è‰²å›¾åƒï¼Œæ€»å…±å¯è¡¨ç¤º2^24=16777216ç§è‰²å½©ï¼Œå¯¹ä¸‹ä¸‹å›¾çš„å½©è‰²ç«‹æ–¹ä½“ åˆ†ç¦»è‰²å½©å›¾åƒä»»æ„ä¸€ä¸ªåƒç´ ç‚¹éƒ½å¯ä»¥åˆ†ç¦»å‡ºRã€Gã€Bå¯¹åº”è‰²å½©æ·±åº¦ï¼Œè€Œä¸€å‰¯å›¾åƒæ‰€æœ‰åƒç´ çš„R/G/Bè‰²å½©æ·±åº¦é›†åˆï¼Œå³æž„æˆäº†è¯¥å›¾åƒçš„RGBåˆ†ç¦»è‰²å½©å›¾åƒã€‚ CYMå½©è‰²æ¨¡åž‹HSIå½©è‰²æ¨¡åž‹YUVå½©è‰²æ¨¡åž‹]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸ƒç‰›äº‘å¯Œåª’ä½“å¤„ç†-å›¾ç‰‡å¤„ç†-imageMogr2]]></title>
      <url>%2F2016%2F12%2F20%2F%E4%B8%83%E7%89%9B%E4%BA%91%E5%AF%8C%E5%AA%92%E4%BD%93%E5%A4%84%E7%90%86-%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86-imageMogr2%2F</url>
      <content type="text"><![CDATA[ä¸ƒç‰›äº‘å¯Œåª’ä½“å¤„ç†-å›¾ç‰‡å¤„ç†å‘½ä»¤imageMogr2ä½¿ç”¨ç¤ºä¾‹å’Œdemo å‰è¨€ä¸ƒç‰›äº‘çš„å®˜æ–¹å¯Œåª’ä½“å¤„ç†æŠ€æœ¯æ–‡æ¡£: http://developer.qiniu.com/code/v6/api/kodo-api/image/index.html ç¼©æ”¾(thumbnail)http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpgåŽŸå§‹å›¾ç‰‡ä¿¡æ¯ï¼š1234567&#123; &quot;format&quot;: &quot;jpeg&quot;, &quot;width&quot;: 640, &quot;height&quot;: 427, &quot;colorModel&quot;: &quot;ycbcr&quot;, &quot;orientation&quot;: &quot;Top-left&quot;&#125; æŒ‰æ¯”ä¾‹ç¼©æ”¾ç­‰æ¯”ç¼©æ”¾(ç­‰æ¯”ç¼©å°75%)http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpg?imageMogr2/thumbnail/!75p å®½ä¸å˜ï¼Œé«˜ç¼©æ”¾(é«˜ç¼©å°75%)http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpg?imageMogr2/thumbnail/!x75p é«˜ä¸å˜ï¼Œå®½ç¼©æ”¾(å®½ç¼©å°75%)http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpg?imageMogr2/thumbnail/!75px è£å‰ª(crop)é‡å¿ƒå‚æ•°è¡¨1234567891011NorthWest | North | NorthEast | | | | --------------+----------------+-------------- | | West | Center | East | | --------------+----------------+-------------- | | | | SouthWest | South | SouthEast é‡å¿ƒå’ŒX-Yè½´æ­£å€¼æ–¹å‘1234567891011121314151617181920212223NorthWest | North | NorthEast ------&gt;x | ------&gt;x | x&lt;------ | | | | | | | | | | | | | | | v | v | v y | y | y--------------+----------------+---------------West | Center | East ------&gt;x | ------&gt;x | x&lt;------ | | | | | | | | | | | | | | | v | v | v y | y | y--------------+----------------+--------------- y | y | y ^ | ^ | ^ | | | | | | | | | | | | | | | ------&gt;x | ------&gt;x | x&lt;------ SouthWest | South | SouthEast è£å‰ªåç§»gravity=NorthWest (é»˜è®¤é‡å¿ƒå‚æ•°)ï¼Œè£å‰ªå‚æ•°300x300 x:-30 y:-30 x:0 y:-30 x:+30 y:-30 x:-30 y:0 x:0 y:0 x:+30 y:0 x:-30 y:+30 x:0 y:+30 x:+30 y:+30]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ffmpegæ·»åŠ å›¾ç‰‡æ°´å°çš„ç•¸å˜é—®é¢˜]]></title>
      <url>%2F2016%2F12%2F12%2Fffmpeg-watermark%2F</url>
      <content type="text"><![CDATA[æ‘˜è¦ï¼š éŸ³è§†é¢‘æ·»åŠ å›¾ç‰‡æ°´å°æ—¶ï¼ŒSAR/DARä¼šé€ æˆå›¾ç‰‡æ°´å°éšå¸§ç”»é¢ç•¸å˜ã€‚æœ¬æ–‡å°†åˆ†æžç•¸å˜äº§ç”ŸåŽŸå› å’ŒæŽ¢ç´¢è§£å†³æ–¹æ¡ˆ PAR/SAR/DARå®šä¹‰ PAR(Pixel Aspect Ratio) åƒç´ å®½é«˜æ¯”ï¼šå•ä¸ªåƒç´ çš„å®½é«˜æ¯”ï¼Œé€šå¸¸è¯¥å€¼ä¸º1ï¼Œå³æ­£æ–¹å½¢åƒç´ ï¼›è‹¥ä¸ä¸º1ï¼Œåˆ™ä¸ºé•¿æ–¹å½¢åƒç´ ã€‚ SAR(Sample Aspect Ratio) é‡‡æ ·çºµæ¨ªæ¯”ï¼šè§†é¢‘æ¨ªå‘å¯¹åº”çš„åƒç´ ä¸ªæ•°æ¯”ä¸Šè§†é¢‘çºµå‘çš„åƒç´ ä¸ªæ•°ï¼Œå³ä¸ºæˆ‘ä»¬é€šå¸¸æåˆ°çš„åˆ†è¾¨çŽ‡ã€‚ DAR(Display Aspect Ratio) æ˜¾ç¤ºå®½é«˜æ¯”ï¼šç»ˆç«¯æ˜¾ç¤ºæ—¶ï¼Œæ’­æ”¾ç”»é¢çš„å®½é«˜æ¯”ã€‚ è®¡ç®—å…¬å¼SAR x PAR = DAR é€šè¿‡ä¸Šè¿°å…¬å¼ï¼Œå¯ä»¥æ ¹æ®SARã€PARã€DARä¸­çš„ä¸¤ä¸ªè®¡ç®—å‡ºå¦å¤–ä¸€ä¸ª ffmpegä¸­çš„åˆ†è¾¨çŽ‡ã€SARã€DARå…ˆæ¥çœ‹ä¸€ä¸ªæ ·ä¾‹è§†é¢‘çš„è§†é¢‘ä¿¡æ¯12345678&quot;width&quot;: 1920,&quot;height&quot;: 1080,&quot;coded_width&quot;: 1920,&quot;coded_height&quot;: 1088,&quot;has_b_frames&quot;: 2,&quot;sample_aspect_ratio&quot;: &quot;1:1&quot;,&quot;display_aspect_ratio&quot;: &quot;16:9&quot;,&quot;pix_fmt&quot;: &quot;yuv420p&quot;, åˆ†æžä¸Šè¿°æ ·ä¾‹è§†é¢‘çš„avinfoä¿¡æ¯å¯çŸ¥ï¼š åˆ†è¾¨çŽ‡=1920x108 sar=1:1 dar=16:9 å®žé™…ä¸Šï¼Œç”±äºŽé€šå¸¸PAR=1:1ï¼Œä½¿å¾—å¸§ç”»é¢çš„å®½é«˜æ¯”=åˆ†è¾¨çŽ‡ï¼ˆå³å®½é«˜åƒç´ æ•°ç›®ï¼‰ æ­¤æ—¶ï¼Œffmpegå¯¹äºŽåˆ†è¾¨çŽ‡ã€sarã€daræœ‰å¦‚ä¸‹å…¬å¼ï¼š W/H * SAR = DAR ä¸Šè¿°æ ·ä¾‹è§†é¢‘ï¼Œ1920/1080 * (1/1) = 16:9 å†çœ‹å¦å¤–ä¸€ä¸ªæ ·ä¾‹è§†é¢‘çš„è§†é¢‘ä¿¡æ¯12345678&quot;width&quot;: 480,&quot;height&quot;: 320,&quot;coded_width&quot;: 480,&quot;coded_height&quot;: 320,&quot;has_b_frames&quot;: 2,&quot;sample_aspect_ratio&quot;: &quot;32:27&quot;,&quot;display_aspect_ratio&quot;: &quot;16:9&quot;,&quot;pix_fmt&quot;: &quot;yuv420p&quot;, ä¸Šè¿°è§†é¢‘ï¼Œ480/320 * (32/27) = 16/9 æ°´å°ç•¸å˜æ’­æ”¾å½¢å˜ä¸€èˆ¬è§†é¢‘ç»ˆç«¯æ’­æ”¾æ˜¯å¦å‘ç”Ÿå½¢å˜ï¼Œå¯ä»¥æ ¹æ®å¦‚ä¸‹å‚æ•°æ¥åˆ¤å®šï¼š å½“SAR=1:1æ—¶ï¼Œåˆ†è¾¨çŽ‡å®½é«˜æ¯” = DARï¼Œè¡¨ç¤ºå¸§ç”»é¢åœ¨ç»ˆç«¯æ’­æ”¾æ—¶ä¸ä¼šäº§ç”Ÿå½¢å˜ å½“SAR!=1:1æ—¶ï¼Œåˆ†è¾¨çŽ‡å®½é«˜æ¯” != DARï¼Œè¡¨ç¤ºå¸§ç”»é¢åœ¨ç»ˆç«¯æ’­æ”¾æ—¶ä¼šäº§ç”Ÿå½¢å˜ ç»ˆç«¯æ’­æ”¾å½¢å˜æ–¹å¼å½¢å˜æ–¹å¼é€šå¸¸å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼š ä¿æŒçŸ­è¾¹ä¸å˜ï¼Œé•¿è¾¹ç¼©æ”¾ ä¿æŒé•¿è¾¹ä¸å˜ï¼ŒçŸ­è¾¹ç¼©æ”¾ é•¿è¾¹çŸ­è¾¹åŒæ—¶ç¼©æ”¾ è‹¥ä»¥æ ·ä¾‹è§†é¢‘äºŒä¸ºä¾‹ï¼Œä¸Šè¿°ä¸‰ç§å½¢å˜æ–¹å¼å¯å¾—ï¼š åŽŸå§‹ç”»é¢480x320ï¼ŒçŸ­è¾¹ä¿æŒä¸å˜ï¼Œæ­¤æ—¶H=320,DAR=16/9ï¼Œå¾—W=320/9*16=569,å³é•¿è¾¹ç¼©æ”¾æ¯”ä¸º569/480=1.185 åŽŸå§‹ç”»é¢480x320ï¼Œé•¿è¾¹è¾¹ä¿æŒä¸å˜ï¼Œæ­¤æ—¶W=480,DAR=16/9,å¾—H=480/16*9=270ï¼Œå³çŸ­è¾¹çš„ç¼©æ”¾æ¯”ä¸º270/320=0.84375 æ ¹æ®æ’­æ”¾å™¨å®žé™…æƒ…å†µå‘ç”Ÿå˜åŒ– æ’­æ”¾å½¢å˜å¸¦æ¥çš„æ°´å°å½¢å˜å›¾ç‰‡æ°´å°é€šå¸¸ç›´æŽ¥åˆæˆåœ¨åŽŸå§‹å¸§ç”»é¢ä¸­ï¼Œæ•…æ’­æ”¾ç«¯çš„å½¢å˜ä¼šè¿žå¸¦é€ æˆæ°´å°äº§ç”Ÿç•¸å˜ ä»¥ä¸Šè¿°å½¢å˜æ–¹å¼1ä¸ºä¾‹ï¼Œå‡è®¾ä¸ºåŽŸå§‹è§†é¢‘æ‰“ä¸Šä¸€ä¸ª40x40çš„æ–¹å½¢æ°´å°ï¼Œåœ¨ç»ˆç«¯æ’­æ”¾æ—¶ï¼Œé•¿è¾¹ä¼šè¿›è¡Œ1.185å€çš„ç¼©æ”¾ï¼Œæ•…å®žé™…æ°´å°æ˜¾ç¤ºå¤§å°çº¦ä¸º47x40ï¼Œç•¸å˜æˆä¸ºä¸€ä¸ªé•¿æ–¹å½¢æ°´å° å›¾ç‰‡æ°´å°ç•¸å˜çš„è§£å†³æ–¹æ¡ˆåœ¨å®žé™…çš„ç”Ÿäº§åº”ç”¨ä¸­ï¼Œæœ‰äº›éœ€æ±‚æ°´å°è¦ä¿æŒåŽŸå§‹çš„é•¿å®½æ¯”ï¼Œä¸èƒ½å‘ç”Ÿç•¸å˜ï¼Œæ­¤æ—¶éœ€è¦å¯¹å›¾ç‰‡æ°´å°ç•¸å˜è¿›è¡Œä¿®æ­£ åå‘ä¿®æ­£æ°´å°å›¾ç‰‡é¡¾åæ€ä¹‰ï¼Œç”±äºŽç•¸å˜å‘ç”Ÿåœ¨æ’­æ”¾ç»ˆç«¯ï¼Œæ•…å¯ä»¥é¢„æµ‹ç•¸å˜è¡Œä¸ºï¼Œé¢„å…ˆå°†æ°´å°å›¾ç‰‡å˜å½¢åŽå†åŽ‹å…¥åŽŸå§‹å¸§ç”»é¢ï¼Œé¢„å˜å½¢å›¾ç‰‡ä¼šæŒ‰é¢„æœŸç•¸å˜åŽæ¢å¤æ­£å¸¸ ä»¥æ ·ä¾‹è§†é¢‘äºŒä¸ºä¾‹ï¼Œæ·»åŠ 40x40çš„æ°´å°ï¼Œå‡è®¾é‡‡ç”¨ç¬¬ä¸€ç§å½¢å˜æ–¹å¼ï¼š è®¡ç®—å¯çŸ¥ï¼ŒåŽŸå§‹å¸§ç”»é¢æ¨ªè¾¹ç¼©æ”¾æ¯”ä¸º1.185 åå‘åŽ‹ç¼©æ°´å°è§†é¢‘W=40/1.185=34ï¼Œå³å°†æ°´å°å›¾ç‰‡åŽ‹ç¼©æˆä¸º34x40 ç»ˆç«¯æ’­æ”¾ï¼Œæ ¹æ®ç¬¬ä¸€ç§å½¢å˜æ–¹å¼ï¼Œé•¿è¾¹ç¼©æ”¾ï¼Œå›¾ç‰‡æ°´å°Wâ€™=34*1.185=40ï¼Œå³æ¢å¤åˆ°40x40çš„æ°´å°å›¾ç‰‡ ç¬¬äºŒç§å½¢å˜æ–¹å¼å¤„ç†æ–¹å¼ç›¸åŒ ä¸Šè¿°æ–¹å¼å­˜åœ¨é—®é¢˜ï¼š å¦‚æžœé¢„æµ‹çš„å½¢å˜æ–¹å¼ä¸Žç»ˆç«¯å®žé™…å½¢å˜æ–¹å¼ä¸åŒï¼Œå¯èƒ½é€ æˆæ°´å°å›¾ç‰‡ç­‰æ¯”ç¼©æ”¾ æ¯”å¦‚ï¼Œé¢„æµ‹ç¬¬ä¸€ç§å½¢å˜æ–¹å¼ï¼Œå®žé™…ç»ˆç«¯æ’­æ”¾é‡‡ç”¨ç¬¬äºŒä¸­å½¢å˜æ–¹å¼ï¼š æ°´å°å›¾ç‰‡åŽ‹ç¼©åŽ34x40 ç»ˆç«¯æ’­æ”¾æ—¶ï¼ŒçŸ­è¾¹ç¼©æ”¾æ¯”ä¸º0.84375ï¼Œæ’­æ”¾æ—¶æ°´å°é«˜H=40*0.84375=34ï¼Œå³æ°´å°å›¾ç‰‡å®žé™…æ’­æ”¾å¤§å°ä¸º34x34ï¼Œå³å®žé™…æ°´å°ç­‰æ¯”ç¼©æ”¾äº†0.84375å€ è€Œè‹¥æ˜¯ç»ˆç«¯æ’­æ”¾é‡‡ç”¨ç¬¬ä¸‰ç§å½¢å˜æ–¹å¼ï¼Œåˆ™æ°´å°å›¾ç‰‡ç•¸å˜ä¸å¯é¢„æµ‹ï¼Œæ•…ä¿®æ­£åŽä»å¯èƒ½ç•¸å˜ ï¼ˆç”±äºŽæ’­æ”¾å½¢å˜å–å†³çš„ç»ˆç«¯è¡Œä¸ºï¼Œæ•…å¯¹æ°´å°ç•¸å˜çš„æƒ…å†µå¹¶ä¸èƒ½å‡†ç¡®é¢„æµ‹ï¼Œä¸åŒçš„ç•¸å˜æ¨¡å¼çš„ä¿®æ­£æ–¹å¼ä¸ä¸€æ ·ï¼Œåšä¸»ä»…èƒ½æ®å·¥ä½œä¸­çš„å®žé™…å¤„ç†æƒ…å†µç»™å‡ºä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œæ¬¢è¿Žå¤§å®¶æŒ‡æ­£ï¼‰]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[CPUé«˜é€Ÿç¼“å­˜è¡Œå¯¹é½]]></title>
      <url>%2F2011%2F09%2F17%2FCPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E8%A1%8C%E5%AF%B9%E9%BD%90%2F</url>
      <content type="text"><![CDATA[æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»äº†CPUé«˜é€Ÿç¼“å­˜ä»¥åŠé«˜é€Ÿç¼“å­˜è¡Œå¯¹é½ï¼ŒæŽ¢ç´¢ç¼–ç¨‹ä¸­å¯¹äºŽè¡Œå¯¹é½çš„ä¼˜åŒ– CPUé«˜é€Ÿç¼“å­˜CPUçš„é«˜é€Ÿç¼“å­˜ä¸€èˆ¬åˆ†ä¸ºä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼ŒçŽ°ä»Šæ›´å¤šçš„CPUæ›´æ˜¯æä¾›äº†ä¸‰çº§ç¼“å­˜ã€‚ CPUåœ¨è¿è¡Œæ—¶é¦–å…ˆä»Žä¸€çº§ç¼“å­˜è¯»å–æ•°æ®ï¼Œå¦‚æžœè¯»å–å¤±è´¥åˆ™ä¼šä»ŽäºŒçº§ç¼“å­˜è¯»å–æ•°æ®ï¼Œå¦‚æžœä»ç„¶å¤±è´¥åˆ™å†ä»Žå†…å­˜ä¸­å­˜è¯»å–æ•°æ®ã€‚è€ŒCPUä»Žä¸€çº§ç¼“å­˜æˆ–äºŒçº§ç¼“å­˜æˆ–ä¸»å†…å­˜ä¸­æœ€ç»ˆè¯»å–åˆ°æ•°æ®æ‰€è€—è´¹çš„æ—¶é’Ÿå‘¨æœŸå·®è·æ˜¯éžå¸¸ä¹‹å¤§çš„ã€‚å› æ­¤é«˜é€Ÿç¼“å­˜çš„å®¹é‡å’Œé€Ÿåº¦ç›´æŽ¥å½±å“åˆ°CPUçš„å·¥ä½œæ€§èƒ½ã€‚ ä¸€çº§ç¼“å­˜éƒ½å†…ç½®åœ¨CPUå†…éƒ¨å¹¶ä¸ŽCPUåŒé€Ÿè¿è¡Œï¼Œå¯ä»¥æœ‰æ•ˆçš„æé«˜CPUçš„è¿è¡Œæ•ˆçŽ‡ã€‚ä¸€çº§ç¼“å­˜è¶Šå¤§ï¼ŒCPUçš„è¿è¡Œæ•ˆçŽ‡å¾€å¾€è¶Šé«˜ã€‚ é«˜é€Ÿç¼“å­˜è¡Œå¯¹é½å•CPUç¼“å­˜è¡Œå¯¹é½ä¸€çº§ç¼“å­˜åˆåˆ†ä¸ºæ•°æ®ç¼“å­˜å’ŒæŒ‡ä»¤ç¼“å­˜ï¼Œä»–ä»¬éƒ½ç”±é«˜é€Ÿç¼“å­˜è¡Œç»„æˆï¼Œå¯¹äºŽX86æž¶æž„çš„CPUæ¥è¯´ï¼Œé«˜é€Ÿç¼“å­˜è¡Œä¸€èˆ¬æ˜¯32ä¸ªå­—èŠ‚ï¼Œæ—©æœŸçš„CPUå¤§çº¦åªæœ‰512è¡Œé«˜é€Ÿç¼“å­˜è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´çº¦16kçš„ä¸€çº§ç¼“å­˜ã€‚è€ŒçŽ°åœ¨çš„CPUä¸€èˆ¬éƒ½æ˜¯32Kä»¥ä¸Šçš„ä¸€çº§ç¼“å­˜ã€‚ å½“CPUéœ€è¦è¯»å–ä¸€ä¸ªå˜é‡æ—¶ï¼Œè¯¥å˜é‡æ‰€åœ¨çš„ä»¥32å­—èŠ‚åˆ†ç»„çš„å†…å­˜æ•°æ®å°†è¢«ä¸€åŒè¯»å…¥é«˜é€Ÿç¼“å­˜è¡Œï¼Œæ‰€ä»¥ï¼Œå¯¹äºŽæ€§èƒ½è¦æ±‚ä¸¥æ ¼çš„ç¨‹åºæ¥è¯´ï¼Œå……åˆ†åˆ©ç”¨é«˜é€Ÿç¼“å­˜è¡Œçš„ä¼˜åŠ¿éžå¸¸é‡è¦ã€‚ä¸€æ¬¡æ€§å°†è®¿é—®é¢‘ç¹çš„32å­—èŠ‚æ•°æ®å¯¹é½åŽè¯»å…¥é«˜é€Ÿç¼“å­˜ä¸­ï¼Œå‡å°‘CPUé«˜çº§ç¼“å­˜ä¸Žä½Žçº§ç¼“å­˜ã€å†…å­˜çš„æ•°æ®äº¤æ¢ã€‚ å¤šCPUç¼“å­˜è¡Œå¯¹é½å¯¹äºŽå¤šCPUçš„è®¡ç®—æœºï¼Œæƒ…å†µå´åˆä¸ä¸€æ ·äº†ï¼š CPU1è¯»å–äº†ä¸€ä¸ªå­—èŠ‚ï¼Œä»¥åŠå®ƒå’Œå®ƒç›¸é‚»çš„å­—èŠ‚è¢«è¯»å…¥ CPU1 çš„é«˜é€Ÿç¼“å­˜ã€‚ CPU2åšäº†ä¸Šé¢åŒæ ·çš„å·¥ä½œã€‚è¿™æ · CPU1ï¼ŒCPU2 çš„é«˜é€Ÿç¼“å­˜æ‹¥æœ‰åŒæ ·çš„æ•°æ®ã€‚ CPU1ä¿®æ”¹äº†é‚£ä¸ªå­—èŠ‚ï¼Œè¢«ä¿®æ”¹åŽï¼Œé‚£ä¸ªå­—èŠ‚è¢«æ”¾å›žCPU1çš„é«˜é€Ÿç¼“å­˜è¡Œã€‚ä½†æ˜¯è¯¥ä¿¡æ¯å¹¶æ²¡æœ‰è¢«å†™å…¥RAM ã€‚ CPU2è®¿é—®è¯¥å­—èŠ‚ï¼Œä½†ç”±äºŽCPU1å¹¶æœªå°†æ•°æ®å†™å…¥RAM ï¼Œå¯¼è‡´äº†æ•°æ®ä¸åŒæ­¥ã€‚ å½“ä¸€ä¸ªCPUä¿®æ”¹é«˜é€Ÿç¼“å­˜è¡Œä¸­çš„å­—èŠ‚æ—¶ï¼Œè®¡ç®—æœºä¸­çš„å…¶å®ƒCPUä¼šè¢«é€šçŸ¥ï¼Œå®ƒä»¬çš„é«˜é€Ÿç¼“å­˜å°†è§†ä¸ºæ— æ•ˆã€‚äºŽæ˜¯ï¼Œåœ¨ä¸Šé¢çš„æƒ…å†µä¸‹ï¼Œ CPU2å‘çŽ°è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ä¸­æ•°æ®å·²æ— æ•ˆï¼Œ CPU1å°†ç«‹å³æŠŠè‡ªå·±çš„æ•°æ®å†™å›žRAMï¼Œç„¶åŽCPU2é‡æ–°è¯»å–è¯¥æ•°æ®ã€‚å¯ä»¥çœ‹å‡ºï¼Œé«˜é€Ÿç¼“å­˜è¡Œåœ¨å¤šå¤„ç†å™¨ä¸Šä¼šå¯¼è‡´ä¸€äº›ä¸åˆ©ã€‚ ä»Žä¸Šé¢çš„æƒ…å†µå¯ä»¥çœ‹å‡ºï¼Œåœ¨è®¾è®¡æ•°æ®ç»“æž„çš„æ—¶å€™ï¼Œåº”è¯¥å°½é‡å°†åªè¯»æ•°æ®ä¸Žè¯»å†™æ•°æ®åˆ†å¼€ï¼Œå¹¶å…·å°½é‡å°†åŒä¸€æ—¶é—´è®¿é—®çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·ã€‚è¿™æ ·CPUèƒ½ä¸€æ¬¡å°†éœ€è¦çš„æ•°æ®è¯»å…¥ã€‚ ç¼–ç¨‹ä¸­å¯¹ç¼“å­˜è¡Œå¯¹é½çš„ä¼˜åŒ–å‡è®¾æœ‰å¦‚ä¸‹ç»“æž„ä½“1234567Struct __a&#123; Int id; // ä¸æ˜“å˜ Int factor;// æ˜“å˜ Char name[64];// ä¸æ˜“å˜ Int value;// æ˜“å˜&#125; ï¼› æ ¹æ®ä¸Šè¿°è¡Œå¯¹é½åŽŸæ¥ï¼Œè¿™æ ·çš„æ•°æ®ç»“æž„åœ¨X86æž¶æž„ä¸‹ï¼Œæ‰§è¡Œæ˜¯ä¸åˆ©çš„ å¯ä»¥åšå¦‚ä¸‹è°ƒæ•´ï¼Œä¿è¯è¯»å†™åˆ†ç¦»è¡Œå¯¹é½123456789Struct __a&#123; Int id; // ä¸æ˜“å˜ Char name[64];// ä¸æ˜“å˜ Char __Align[32 â€“ sizeof(int)+sizeof(name)*sizeof(name[0])%32] Int factor;// æ˜“å˜ Int value;// æ˜“å˜ Char __Align2[32 â€“2* sizeof(int)%32]&#125; ï¼› 32 â€“ sizeof(int)+sizeof(name)*sizeof(name[0])%32 32 è¡¨ç¤º X86 æž¶æž„ä¸­ç¼“å­˜ä¸­ï¼Œé«˜é€Ÿç¼“å­˜è¡Œä¸º 32å­—èŠ‚ å¤§å°ã€‚ __Align ç”¨äºŽæ˜¾å¼å¯¹é½ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[bochs+gdbæºç çº§è°ƒè¯•linux0.12å†…æ ¸æµ‹è¯•çŽ¯å¢ƒæž„å»º]]></title>
      <url>%2F2011%2F05%2F31%2Fbochs-gdb-linux0-12-debug%2F</url>
      <content type="text"><![CDATA[bochs+gdbæ­å»ºlinux0.12å†…æ ¸æºç è°ƒè¯•çŽ¯å¢ƒ å‰è¨€ä¹‹å‰éƒ½æ˜¯ç”¨çš„bochsè‡ªå¸¦çš„debugåŠŸèƒ½ï¼Œä½†æ˜¯linuxå†…æ ¸å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨Cè¯­vvè¨€æ¥å®žçŽ°çš„ï¼Œè‹¥ä»…é€šè¿‡åæ±‡ç¼–çš„æ±‡ç¼–æ¥å­¦ä¹ ï¼Œå¤ªç´¯äº†ã€‚ã€‚ã€‚ æ‰€ä»¥ä»Šå¤©èŠ±äº†ä¸€ä¸ªä¸Šåˆçš„æ—¶é—´ï¼Œæ­å»ºèµ·äº†bochs+gbdçš„è”è°ƒçŽ¯å¢ƒã€‚ å®‰è£…bochsé¦–å…ˆè¿˜æ˜¯è¦å®‰è£…bochsï¼Œä»ç„¶æ˜¯æŽ¨èä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼ˆ2.4.6ï¼‰ï¼Œå¦‚æžœä½¿ç”¨åƒ2.3.6ç­‰è€ç‰ˆæœ¬ï¼Œä¹Ÿè®¸ä¼šå¯¼è‡´åŽé¢ä¸Žgdbæ— æ³•è¿œç¨‹è¿žæŽ¥ï¼ˆNNDï¼Œå°±æ˜¯è¿™ä¸ªæ¶å¿ƒçš„é—®é¢˜æµªè´¹äº†æˆ‘å‡ ä¸ªå°æ—¶ã€‚ã€‚ã€‚ï¼‰ linuxä¸Šè¿˜æ˜¯è¦ä»Žbochsçš„æºç ç¼–è¯‘å¼€å§‹å®‰è£…ï¼Œbinæ–‡ä»¶å®‰è£…çš„ç‰ˆæœ¬æ— æ³•æä¾›è°ƒè¯•åŠŸèƒ½ã€‚ é…ç½®bochsæºç æ—¶ï¼Œè¾“å…¥å‘½ä»¤ ./configure â€“enable-gdb-stubï¼Œç„¶åŽä½¿ç”¨makeå’Œsudo make installå‘½ä»¤å®Œæˆå®‰è£…ã€‚ å®‰è£…æ—¶å¯èƒ½ä¼šé‡åˆ°X windowsåº“ä¸å…¨çš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡apt-getå®‰è£…xorg-devè§£å†³ã€‚ å¦‚æžœæ˜¯ä»Žsource codeè¿›è¡Œç¼–è¯‘å®‰è£…æ—¶ï¼Œæœ‰å¯èƒ½ä¼šç”¨åˆ°çš„ä¸¤ä¸ªç»„ä»¶åˆ†åˆ«æ˜¯build-essentialå’Œlibxrandr-devï¼Œå„è‡ªä½œç”¨è¯·è‡ªè¡Œæœç´¢ï½ž é…ç½®bochsé…ç½®bochsè™šæ‹ŸæœºçŽ¯å¢ƒéœ€è¦ä¸€ä¸ª.bxrcæ–‡ä»¶å’Œç”Ÿäº§ä¸€ä¸ªæ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œå»ºè®®ç›´æŽ¥åˆ°oldlinuxä¸Šä¸‹è½½ä¸€ä¸ªlinux-0.11-gdb-rh9-050619.tar.gzï¼Œå…¶ä¸­å·²ç»åŒ…å«äº†é…ç½®å¥½çš„è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦å¤–åœ¨linuxæ–‡ä»¶å¤¹ä¸‹æœ‰linux0.11çš„æºç ã€‚ .bxrcæ–‡ä»¶ä¸­ä¸»è¦æ˜¯æ·»åŠ äº†ä¸€æ¡è°ƒè¯•ä¿¡æ¯1gdbstub: enable=1, port=1234, text_base=0, data_base=0, bss_base=0 å¦å¤–ï¼Œè¿™ä¸ªbxrcæ–‡ä»¶ä¸­éœ€è¦ç¨ç¨ä¿®æ”¹ä¸€äº›ä¸œè¥¿ï¼š romimage: file=$BXSHARE/BIOS-bochs-latest, address=0xf0000 æ”¹æˆ romimage: file=$BXSHARE/BIOS-bochs-latest floppy_command_delay: 50000 æ”¹æˆ #floppy_command_delay: 50000 3.ips: 4000000 æ”¹æˆ cpu: count=1, ips=4000000 ä½¿ç”¨bochsè¿›è¡Œè”æœºè°ƒè¯• æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ã€‚ ä¸€ä¸ªç»ˆç«¯è¿›å…¥åˆ°linux-gdb-rh9/ï¼Œè¿è¡Œç¨‹åºâ€./runâ€ï¼Œæ­¤æ—¶çª—å£æ˜¾ç¤ºç­‰å¾…ä¿¡æ¯â€œwait for gdb connection on localhost:1234â€ å¦ä¸€ä¸ªç»ˆç«¯è¿›å…¥linux-gdb-rh9/linux/ï¼Œè¿è¡Œ gdb tools/system åœ¨gdbçª—å£ä¸­è¾“å…¥b mainï¼ˆåœ¨mainå‡½æ•°å¤„ä¸‹æ–­ï¼‰ è¾“å…¥target remote localhost:1234 ï¼Œè¿žæŽ¥åˆ°bochsè™šæ‹Ÿæœºä¸Š è¾“å…¥cï¼Œè®©ç¨‹åºæŒç»­è¿è¡Œï¼Œç›´åˆ°ç»ˆç«¯åœ¨mainå‡½æ•°ä¸­ å¯ä»¥å¼€å§‹ä½¿ç”¨gdbè¿›è¡Œæºç è°ƒè¯•äº†^_^ Tips æ—©æœŸæºç é»˜è®¤çš„æ±‡ç¼–ç¼–è¯‘å™¨ä¸ºgasï¼Œé“¾æŽ¥å™¨ä¸ºgldï¼Œæ‰€ä»¥åœ¨Makefileæ–‡ä»¶ä¸­æ˜¾ç¤ºå£°æ˜Žas=gas ld=gldã€‚è€Œåœ¨ubuntu 11.04ä¸­ï¼Œgccæ—©å·²æˆä¸ºé»˜è®¤çš„ç¼–è¯‘å™¨äº†ï¼Œæ‰€ä»¥å¦‚æžœæ˜¯å¦å¤–ä¸‹è½½çš„æºç ï¼Œéœ€è¦å°†Makefileä¸­çš„as=gas ld=gldæ”¹æˆ as=asï¼Œ ld=ld å…ˆå†™åˆ°è¿™ï¼Œæœ‰åœ¨æƒ³åˆ°çš„ç»§ç»­å•Š~~~^_^]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[bochsçš„ä½¿ç”¨å¿ƒå¾—]]></title>
      <url>%2F2011%2F05%2F28%2Fbochs-experience%2F</url>
      <content type="text"><![CDATA[bochsçš„ä½¿ç”¨å’Œè°ƒè¯• linuxå†…æ ¸ ç®€ä»‹bochsçš„ç®€ä»‹å§ï¼Œæ¥è‡ªåº¦å¨˜ï¼š Bochsæ˜¯ä¸€ä¸ªx86ç¡¬ä»¶å¹³å°çš„å¼€æºæ¨¡æ‹Ÿå™¨ã€‚å®ƒå¯ä»¥æ¨¡æ‹Ÿå„ç§ç¡¬ä»¶çš„é…ç½®ã€‚Bochsæ¨¡æ‹Ÿçš„æ˜¯æ•´ä¸ªPCå¹³å°ï¼ŒåŒ…æ‹¬I/Oè®¾å¤‡ã€å†…å­˜å’ŒBIOSã€‚æ›´ä¸ºæœ‰è¶£çš„æ˜¯ï¼Œç”šè‡³å¯ä»¥ä¸ä½¿ç”¨PCç¡¬ä»¶æ¥è¿è¡ŒBochsã€‚äº‹å®žä¸Šï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•ç¼–è¯‘è¿è¡ŒBochsçš„å¹³å°ä¸Šæ¨¡æ‹Ÿx86ç¡¬ä»¶ã€‚é€šè¿‡æ”¹å˜é…ç½®ï¼Œå¯ä»¥æŒ‡å®šä½¿ç”¨çš„CPU(386ã€486æˆ–è€…586)ï¼Œä»¥åŠå†…å­˜å¤§å°ç­‰ã€‚ä¸€å¥è¯ï¼ŒBochsæ˜¯ç”µè„‘é‡Œçš„â€œPCâ€ã€‚æ ¹æ®éœ€è¦ï¼ŒBochsè¿˜å¯ä»¥æ¨¡æ‹Ÿå¤šå°PCï¼Œæ­¤å¤–ï¼Œå®ƒç”šè‡³è¿˜æœ‰è‡ªå·±çš„ç”µæºæŒ‰é’®ã€‚ ç”¨ä¸‹æ¥æ„Ÿè§‰bochséžå¸¸å°å·§ï¼Œç›¸æ¯”äºŽVMåŠŸèƒ½ä¸Šå¹¶ä¸ç›¸å·®å¾ˆå¤šï¼Œè€Œä¸”å¯¹äºŽä¸€äº›æ¯”è¾ƒâ€œå¤è‘£â€çš„ç¡¬ä»¶æŽ¥å£æ”¯æŒæ¯”è¾ƒå¥½ï¼Œé€šè¿‡.bxrcæ–‡ä»¶èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ç”Ÿäº§å’Œé…ç½®ç¡¬ä»¶ã€‚bochså†…åµŒçš„è°ƒè¯•å™¨æ¯”è¾ƒå¥½ç”¨ï¼Œå¯ä»¥ä»Žè™šæ‹Ÿæœºé€šç”µåŠ è½½ROM BIOSèµ·å¼€å§‹è°ƒè¯•ï¼Œå¯¹äºŽäº†è§£æ“ä½œç³»ç»Ÿçš„è¯¦ç»†åŽŸç†è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚å°±æ˜¯æ²¡æœ‰å›¾å½¢åŒ–å¾—è°ƒè¯•ç•Œé¢æ¯”è¾ƒè›‹ç–¼ã€‚ã€‚ã€‚ç”¨æƒ¯äº†VS,Windbgçš„äººæœ‰ç‚¹åŽ‹åŠ›å¤§ã€‚ã€‚ã€‚ä¸è¿‡æ…¢æ…¢ç”¨å°±ä¹ æƒ¯äº†ã€‚ èŽ·å–bochså¯ä»¥åŽ»Sourceforgeä¸Šä¸‹è½½srcæˆ–è€…binï¼š http://bochs.sourceforge.net/ ï¼ˆlinuxä¸Šå»ºè®®è¿˜æ˜¯ä»Žsrcå¼€å§‹ç¼–è¯‘ï¼Œbinç‰ˆæœ¬ä¸­å¾€å¾€ä¸å¸¦æœ‰bochsdbgè¿™ä¸ªè°ƒè¯•ç¨‹åºã€‚ã€‚ã€‚windowsçš„è¯å¯ä»¥ç›´æŽ¥ç”¨.exeçš„ï¼Œå®‰è£…å®ŒåŽæ˜¯åŒ…å«dbgç¨‹åºçš„ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ç”¨çš„windowsç‰ˆ^_^ï¼‰ ä¹Ÿå¯ä»¥åŽ»oldlinuxä¸Šä¸‹è½½ï¼š http://oldlinux.org/Linux.old/bochs/èµµç‚¯è€å¸ˆçš„ä¹¦ä¸Šå»ºè®®è°ƒè¯•Linux0.12ä½¿ç”¨çš„æ˜¯bochs2.3.6ï¼Œä½†ç»æˆ‘å®žæµ‹å‘çŽ°æœ€æ–°çš„ç‰ˆæœ¬ï¼ˆçŽ°åœ¨æ˜¯2.4.6ï¼‰ä¹Ÿæ˜¯ä¹Ÿæ˜¯å…¼å®¹çš„ï¼Œè€Œä¸”2.4.6çš„è°ƒè¯•æŒ‡ä»¤ç›¸æ¯”è€ç‰ˆæœ¬æœ‰ä¸å°‘çš„æ”¹è¿›ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ã€‚ å®‰è£…å’Œé…ç½®å®‰è£…å’Œé…ç½®æ¯”è¾ƒç®€å•ï¼Œwindowsçš„è¯åªè¦ä¸‹ä¸€æ­¥å°±OKï¼› linuxä¸Šç¼–è¯‘srcéœ€è¦åœ¨ç¼–è¯‘æ—¶è®¾ç½®ç¼–è¯‘é€‰é¡¹ï¼š 1./configure --prefix=/opt/bochs/debug --enable-plugins --enable-debugger --enable- disasm â€“prefix=/opt/bochs/debug è½¯ä»¶å°†è¢«å®‰è£…åˆ°å“ªä¸ªç›®å½•ä¸‹ â€“enable-plugins æ˜¯å¿…é¡»è¦çš„ â€“enable-debugger æ˜¯æ‰“å¼€bochsçš„è‡ªå¸¦è°ƒè¯•å™¨ â€“enbale-disasm å…è®¸åæ±‡ç¼– è°ƒè¯•æŒ‡ä»¤å†æ¥äº›bochsdbgçš„è°ƒè¯•æŒ‡ä»¤å§ï¼Œç½‘ä¸Šæœçš„æœ‰äº›æŒ‡ä»¤å› ä¸ºç‰ˆæœ¬é—®é¢˜å¹¶ä¸èƒ½ä½¿ç”¨ï¼ˆæˆ‘ç”¨çš„æ˜¯2.4.6ï¼‰ï¼š æ™®é€šæŒ‡ä»¤ç»„ æŒ‡ä»¤æ ¼å¼ åŠŸèƒ½æè¿° b addr åœ¨ç‰©ç†åœ°å€å¤„è®¾ç½®æ–­ç‚¹ addrä¸ºç‰©ç†å†…å­˜åœ°å€ï¼Œä¸åŠ æ®µåŸºå€ lb addr åœ¨çº¿æ€§åœ°å€å¤„è®¾ç½®æ–­ç‚¹ addrä¸ºçº¿æ€§ç‰©ç†åœ°å€ï¼Œä¸åŠ åŸºå€ vb addr åœ¨è™šæ‹Ÿåœ°å€ä¸Šè®¾ç½®æ–­ç‚¹ addrä¸ºæ®µåŸºå€ï¼šåç§»åœ°å€ï¼Œ csæ®µ c ç»§ç»­æ‰§è¡ŒçŸ¥é“é‡åˆ°æ–­ç‚¹ n å•æ­¥æ‰§è¡Œ è·³è¿‡å­ç¨‹åºå’Œintä¸­æ–­ç¨‹åº s å•æ­¥æ‰§è¡Œ s num æ‰§è¡Œnæ­¥ dump_cpu æŸ¥çœ‹å¯„å­˜å™¨ä¿¡æ¯ï¼ˆå®žæµ‹ä¸‹æ¥è¿™ä¸ªæŒ‡ä»¤å¥½åƒä¸å¥½ä½¿ï¼‰ x /nuf addr æ˜¾ç¤ºæŒ‡å®šå†…å­˜åœ°å€çš„æ•°æ®ï¼Œaddrå¯ä»¥æ˜¯çº¿æ€§çš„å†…å­˜åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯è™šå€ æ ¼å¼æ˜¯åŸºå€ï¼šåç§»æˆ–è€…åŸºå€å¯„å­˜å™¨ï¼šåç§»n æ˜¾ç¤ºçš„æ•°æ®é•¿åº¦u æ•°æ®å•å…ƒå¤§å° b,h,w,gåˆ†åˆ«å¯¹åº”1,2,4,8å­—èŠ‚f æ•°æ®æ˜¾ç¤ºæ ¼å¼ x,d,u,o,t,cåˆ†åˆ«å¯¹åº”åå…­è¿›åˆ¶ã€åè¿›åˆ¶ã€æ— ç¬¦å·åè¿›åˆ¶ã€å…«è¿›åˆ¶ã€äºŒè¿›åˆ¶ã€å­—ç¬¦ä¸² u [/count] start end åæ±‡ç¼–ä¸€æ®µçº¿æ€§å†…å­˜(ä½œç”¨ä¸Žä¸Šé¢çš„ä¸€æ ·)(count å‚æ•°æŒ‡æ˜Žè¦åæ±‡ç¼–çš„æŒ‡ä»¤æ¡æ•° ,ä¾‹å­ï¼šu /5 â€“åæ±‡ç¼–ä»Žå½“å‰åœ°å€å¼€å§‹çš„5æ¡æŒ‡ä»¤) infoæŒ‡ä»¤ç»„ æŒ‡ä»¤æ ¼å¼ åŠŸèƒ½æè¿° info b å±•ç¤ºå½“å‰çš„æ–­ç‚¹çŠ¶æ€ä¿¡æ¯ info dirty å±•ç¤ºè‡ªä»Žä¸Šæ¬¡æ˜¾ç¤ºä»¥æ¥ç‰©ç†å†…å­˜ä¸­çš„è„é¡µï¼ˆè¢«å†™çš„é¡µï¼‰ info program å±•ç¤ºç¨‹åºçš„æ‰§è¡ŒçŠ¶æ€ï¼ˆæ— æ³•ä½¿ç”¨ï¼ï¼‰ info r/reg/rigisters å±•ç¤ºå¯„å­˜å™¨å†…å®¹ info cpu å±•ç¤ºCPUå¯„å­˜å™¨å†…å®¹ info fpu å±•ç¤ºFPUå¯„å­˜å™¨çš„çŠ¶æ€ info idt å±•ç¤ºä¸­æ–­æè¿°è¡¨ info ivt å±•ç¤ºä¸­æ–­å‘é‡è¡¨(ä¿æŠ¤æ¨¡å¼ä¸‹æ— æ•ˆ) info gdt å±•ç¤ºå…¨å±€æè¿°è¡¨ info tss å±•ç¤ºå½“å‰çš„ä»»åŠ¡çŠ¶æ€æ®µ info cr å±•ç¤ºCR0-CR4å¯„å­˜å™¨çŠ¶æ€ ï¼ˆæ— æ³•ä½¿ç”¨ï¼‰ info flags å±•ç¤ºæ ‡å¿—å¯„å­˜å™¨ ï¼ˆæ— æ³•ä½¿ç”¨ï¼‰ å¯„å­˜å™¨æŸ¥è¯¢ æŒ‡ä»¤æ ¼å¼ åŠŸèƒ½æè¿° r æŸ¥çœ‹é€šç”¨å¯„å­˜å™¨ sreg æŸ¥çœ‹æ®µå¯„å­˜å™¨ï¼ˆes,cs,gs,ss,fs,dsä»¥åŠidt,gdt,ldt,trï¼‰ creg æŸ¥çœ‹æŽ§åˆ¶å¯„å­˜å™¨ï¼ˆcr0ï¼Œcr1ï¼Œcr2ï¼Œcr3ï¼‰ dreg æŸ¥çœ‹è°ƒè¯•å¯„å­˜å™¨ï¼ˆdr0-dr7ï¼‰ è¿™é‡Œå†æ’ä¸€å¥ï¼Œæ ‡å¿—å¯„å­˜å™¨çš„æŸ¥çœ‹æ–¹æ³•ï¼š123eflags 0x00000002: id vip vif ac vm rf nt IOPL=0 of df if tf sf zf af pf cf ï¼ˆå‡æœªç½®ä½ï¼‰eflags 0x00000046: id vip vif ac vm rf nt IOPL=0 of df if tf sf ZF af PF cf ï¼ˆZF,PFç½®ä½ï¼‰ 0x00000002æ˜¯æ ‡å¿—å¯„å­˜å™¨çš„å®žé™…æ•°å€¼ï¼ŒåŽé¢çš„zfï¼Œsfç­‰ä¸ºæ ‡å¿—ä½ï¼Œå°å†™æ—¶æ ‡å¿—ä½æœªç½®ä½ï¼Œå¤§å†™ä¸ºå·²ç½®ä½ã€‚ åœ¨linux0.12ç³»ç»Ÿä¸Šç¼–è¯‘0.12å†…æ ¸ï¼š ä»Žå‰æ–‡ä¸‹è½½çš„æ ¹æ–‡ä»¶ç³»ç»Ÿrootimage-0.12ä¸Šå·²ç»åŒ…å«äº†0.12å†…æ ¸çš„æºç ï¼Œä½äºŽ/usr/src/linuxã€‚ ä½¿ç”¨makeå‘½ä»¤ç¼–è¯‘æºç ï¼Œç”Ÿæˆå¼•å¯¼åŒºå¯åŠ¨é•œåƒæ–‡ä»¶Imageã€‚ é€šè¿‡å‘½ä»¤dd bs=8192 if=Image of=/dev/fd0 å°†ç”Ÿæˆçš„é•œåƒè¾“å‡ºåˆ°è™šæ‹Ÿè½¯ç›˜æ–‡ä»¶bootimage-0.12-hdä¸Šï¼ˆè®°å¾—å…ˆå¤‡ä»½ä¸€ä¸ªå•Šï¼ï¼‰ï¼Œå†æ¬¡å¯åŠ¨bochsï¼Œå³å¯ç”±æ–°çš„é•œåƒå¼•å¯¼å¯åŠ¨äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[A20åœ°å€çº¿çš„ä¸€ç‚¹ç†è§£]]></title>
      <url>%2F2011%2F05%2F27%2Fa20-bus%2F</url>
      <content type="text"><![CDATA[A20åœ°å€çº¿ Linuxå†…æ ¸å®žçŽ°åŠç³»ç»Ÿå¯åŠ¨å¼•å¯¼ A20åœ°å€çº¿å…ˆæ¥çœ‹çœ‹A20åœ°å€çº¿çš„ç”±æ¥å’ŒåŽ†å²é—ç•™é—®é¢˜ï¼ˆçº¯æ¬è¿ï¼‰ï¼š 1981å¹´8æœˆï¼ŒIBMå…¬å¸æœ€åˆæŽ¨å‡ºçš„ä¸ªäººè®¡ç®—æœºIBM PCä½¿ç”¨çš„CPUæ˜¯Intel 8088ã€‚åœ¨è¯¥å¾®æœºä¸­åœ°å€çº¿åªæœ‰20æ ¹(A0 â€“ A19)ã€‚åœ¨å½“æ—¶å†…å­˜RAMåªæœ‰å‡ ç™¾KBæˆ–ä¸åˆ°1MBæ—¶ï¼Œ20æ ¹åœ°å€çº¿å·²è¶³å¤Ÿç”¨æ¥å¯»å€è¿™äº›å†…å­˜ã€‚å…¶æ‰€èƒ½å¯»å€çš„æœ€é«˜åœ°å€æ˜¯0xffff:0xffffï¼Œä¹Ÿå³0x10ffefã€‚å¯¹äºŽè¶…å‡º0x100000(1MB)çš„å¯»å€åœ°å€å°†é»˜è®¤åœ°çŽ¯ç»•åˆ°0x0ffefã€‚å½“IBMå…¬å¸äºŽ1985å¹´å¼•å…¥ATæœºæ—¶ï¼Œä½¿ç”¨çš„æ˜¯Intel 80286 CPUï¼Œå…·æœ‰24æ ¹åœ°å€çº¿ï¼Œæœ€é«˜å¯å¯»å€16MBï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªä¸Ž8088å®Œå…¨å…¼å®¹çš„å®žæ¨¡å¼è¿è¡Œæ–¹å¼ã€‚ç„¶è€Œï¼Œåœ¨å¯»å€å€¼è¶…è¿‡1MBæ—¶å®ƒå´ä¸èƒ½è±¡8088é‚£æ ·å®žçŽ°åœ°å€å¯»å€çš„çŽ¯ç»•ã€‚ä½†æ˜¯å½“æ—¶å·²ç»æœ‰ä¸€äº›ç¨‹åºæ˜¯åˆ©ç”¨è¿™ç§åœ°å€çŽ¯ç»•æœºåˆ¶è¿›è¡Œå·¥ä½œçš„ã€‚ä¸ºäº†å®žçŽ°å®Œå…¨çš„å…¼å®¹æ€§ï¼ŒIBMå…¬å¸å‘æ˜Žäº†ä½¿ç”¨ä¸€ä¸ªå¼€å…³æ¥å¼€å¯æˆ–ç¦æ­¢0x100000åœ°å€æ¯”ç‰¹ä½ã€‚ç”±äºŽåœ¨å½“æ—¶çš„8042é”®ç›˜æŽ§åˆ¶å™¨ä¸Šæ°å¥½æœ‰ç©ºé—²çš„ç«¯å£å¼•è„šï¼ˆè¾“å‡ºç«¯å£P2ï¼Œå¼•è„šP21ï¼‰ï¼ŒäºŽæ˜¯ä¾¿ä½¿ç”¨äº†è¯¥å¼•è„šæ¥ä½œä¸ºä¸Žé—¨æŽ§åˆ¶è¿™ä¸ªåœ°å€æ¯”ç‰¹ä½ã€‚è¯¥ä¿¡å·å³è¢«ç§°ä¸ºA20ã€‚å¦‚æžœA20ä¸ºé›¶ï¼Œåˆ™æ¯”ç‰¹20åŠä»¥ä¸Šåœ°å€éƒ½è¢«æ¸…é™¤ã€‚ä»Žè€Œå®žçŽ°äº†å…¼å®¹æ€§ã€‚ ç”±äºŽåœ¨æœºå™¨å¯åŠ¨æ—¶ï¼Œé»˜è®¤æ¡ä»¶ä¸‹ï¼ŒA20åœ°å€çº¿æ˜¯ç¦æ­¢çš„ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿå¿…é¡»ä½¿ç”¨é€‚å½“çš„æ–¹æ³•æ¥å¼€å¯å®ƒã€‚ä½†æ˜¯ç”±äºŽå„ç§å…¼å®¹æœºæ‰€ä½¿ç”¨çš„èŠ¯ç‰‡é›†ä¸åŒï¼Œè¦åšåˆ°è¿™ä¸€ç‚¹å´æ˜¯éžå¸¸çš„éº»çƒ¦ã€‚å› æ­¤é€šå¸¸è¦åœ¨å‡ ç§æŽ§åˆ¶æ–¹æ³•ä¸­é€‰æ‹©ã€‚ A20åœ°å€çº¿çš„æŽ§åˆ¶å¯¹A20ä¿¡å·çº¿è¿›è¡ŒæŽ§åˆ¶çš„å¸¸ç”¨æ–¹æ³•æ˜¯é€šè¿‡è®¾ç½®é”®ç›˜æŽ§åˆ¶å™¨çš„ç«¯å£å€¼ã€‚ä¸‹é¢å¼•ç”¨ä¸€æ®µlinux0.11çš„æºç ï¼ˆsetup.sï¼‰: 1234567891011121314151617 call empty_8042 mov al,#0xd1 out #0x64,al call empty_8042 mov al,#0xdf out #0x60,al call empty_8042 ... empty_8042: .word 0x00eb,0x00eb in al,#0x64 test al,#2 jnz empty_8042 ret è´´ä¸€ä¸‹å•Šhead.sä¸­çš„ä»£ç (è¿™é‡Œè½¬æˆIntelæ±‡ç¼–æ ¼å¼ï¼Œæºç æ˜¯AT&amp;Aæ±‡ç¼–ï¼Œçœ‹ç€è›‹ç–¼ã€‚ã€‚)ï¼š123456 xor eax,eaxl: inc eax mov [0x000000],eax; cmp [0x100000],eax; je lb å‘0x000000å­—èŠ‚å¤„æ•°æ®æ”¹ä¸º1ï¼ŒæŸ¥çœ‹0x100000å¤„æ•°æ®æ˜¯å¦åŒæ—¶å˜æˆäº†1ï¼Œè‹¥æ˜¯åˆ™A20åœ°å€çº¿æ²¡ç”¨å¼€å¯ï¼›å¦åˆ™å¼€å¯æˆåŠŸã€‚ Intel 8042èŠ¯ç‰‡è§£é‡Šä¸€ä¸‹Intel 8042èŠ¯ç‰‡ï¼ˆåˆæ˜¯æ¬è¿ã€‚ã€‚ã€‚ï¼‰ï¼š ntel8024æ˜¯intelå…¬å¸çš„ä¸€æ¬¾é”®ç›˜æŽ§åˆ¶å™¨èŠ¯ç‰‡,å®ƒä¸ºx86ç³»ç»Ÿä¸­çš„æ ‡å‡†é…ç½®.è™½ç„¶åä¸ºé”®ç›˜æŽ§åˆ¶å™¨,ä½†æ˜¯é¼ æ ‡ä¹Ÿæ˜¯ç”±å…¶æŽ§åˆ¶çš„. é”®ç›˜é€šå¸¸ä½¿ç”¨IRQ1.é¼ æ ‡é€šå¸¸ä½¿ç”¨IRQ12.IRQ1å’ŒIRQ12éƒ½æ˜¯è¿žæŽ¥åœ¨é”®ç›˜æŽ§åˆ¶å™¨ä¸Šçš„.å¯¹åº”intel8042çš„ä¸¤ä¸ªç«¯å£. é…ç»™é”®ç›˜æŽ§åˆ¶å™¨çš„I/Oç«¯å£æœ‰å››ä¸ª,åˆ†åˆ«æ˜¯0x60~0x64.åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸­,åªä¼šä½¿ç”¨åˆ°0x60å’Œ0x64.å…¶ä½™0x61~0x64çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å…¼å®¹XT.å¯ä»¥å°†0x64çœ‹åšæ˜¯çŠ¶æ€å¯„å­˜å™¨.0x60çœ‹æˆæ˜¯æ•°æ®å¯„å­˜å™¨.æœ‰æ—¶åœ¨ç»™é”®ç›˜æŽ§åˆ¶å™¨ä¸‹æŒ‡ä»¤çš„æ—¶å€™,è¿™ä¸¤ä¸ªç«¯å£éƒ½è¦ç”¨åˆ°.ä¸¤è€…é…åˆæ¥è¾¾åˆ°ä¸‹æŒ‡ä»¤ä¸Žå‚æ•°çš„ç›®çš„. å‘i8042å‘é€å‘½ä»¤: æˆ‘ä»¬éœ€è¦å…ˆæŠŠå‘½ä»¤å‘é€åˆ°0x64ç«¯å£ï¼Œ ç„¶åŽç´§æŽ¥ç€æŠŠè¿™ä¸ªå‘½ä»¤çš„å‚æ•°å‘é€åˆ°0x60ç«¯å£ï¼Œ ç„¶åŽæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»0x60ç«¯å£ï¼ŒèŽ·å¾—i8042è¿”å›žç»™æˆ‘ä»¬çš„æ•°æ®ã€‚]]></content>
    </entry>

    
  
  
</search>
